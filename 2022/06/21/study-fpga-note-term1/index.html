<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Verilog中assign和always的关键词详解 | Arknights</title><script>var config = {"hostname":"http://example.com","root":"/","preload":false,"path":""}</script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="//unpkg.com/@highlightjs/cdn-assets@11.4.0/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 6.1.0"></head><body style="background-image:url(https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg);"><div id="cursor-container"><div id="cursor-outer"></div><div id="cursor-effect"></div></div><main><header><nav><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><ol class="navContent"><li class="navItem search-header"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></li><li class="navItem"><a href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem"><a href="/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav><div class="search-popup"><div id="search-result"></div></div></header><article><div id="post-bg"><div id="post-title"><h1>Verilog中assign和always的关键词详解</h1><div id="post-info"><span>First Post:<span class="control"><time datetime="2022-06-21T14:36:01.000Z" id="date"> 2022-06-21</time></span></span><br><span>Last Update:<span class="control"><time datetime="2022-06-21T18:08:55.008Z" id="updated"> 2022-06-22</time></span></span></div></div><hr><div id="post-content"><h2 id="assign-用于描述组合逻辑"><a href="#assign-用于描述组合逻辑" class="headerlink" title="assign 用于描述组合逻辑"></a>assign 用于描述组合逻辑</h2><blockquote>
<p>标准定义:</p>
<p>组合逻辑电路在逻辑功能上的特点是任意时刻的输出仅仅取决于该时刻的输入,与电路原来的状态无关.而时序逻辑电路在逻辑功能上的特点是任意时刻的输出不仅取决于当时的输入信号,而且还取决于电路原来的状态,或者说,还与以前的输入有关.</p>
<p><strong>与门、或门、非门、与非门、或非门等逻辑门电路.</strong></p>
<p>大致为编码器,译码器,数据选择器,加法器这些不带寄存器的部件.这一部分内容不进行加粗高亮,防止知识架构的混乱.</p>
</blockquote>
<h2 id="always-敏感事件列表-用于描述时序逻辑"><a href="#always-敏感事件列表-用于描述时序逻辑" class="headerlink" title="always@(敏感事件列表) 用于描述时序逻辑"></a>always@(敏感事件列表) 用于描述时序逻辑</h2><blockquote>
<p>标准定义:</p>
<p>由多个触发器和多个组合逻辑块组成的网络.常用的有：计数器、复杂的数据流动控制逻辑、运算控制逻辑、指令分析和操作控制逻辑.同步时序逻辑是设计复杂的数字逻辑系统的核心.时序逻辑借助于状态寄存器记住它目前所处的状态.在不同的状态下，即使所有的输入都相同，其输出也不一定相同.</p>
<p><strong>常见的时序逻辑电路有触发器,计数器,寄存器.</strong></p>
</blockquote>
<h3 id="引用一篇文章的实验帮助进行理解"><a href="#引用一篇文章的实验帮助进行理解" class="headerlink" title="引用一篇文章的实验帮助进行理解:"></a>引用一篇文章的实验帮助进行理解:</h3><blockquote>
<h3 id="Verilog编程，请把时序逻辑和组合逻辑彻底分开！"><a href="#Verilog编程，请把时序逻辑和组合逻辑彻底分开！" class="headerlink" title="Verilog编程，请把时序逻辑和组合逻辑彻底分开！"></a>Verilog编程，请把时序逻辑和组合逻辑彻底分开！</h3><p>以一个同步加法器为例，使用Verilog实现：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs lua">&gt;<span class="hljs-built_in">module</span> adder(<br>	<span class="hljs-built_in">input</span> clk_sys,<br>	<span class="hljs-built_in">input</span> rst_n,<br><br>	<span class="hljs-built_in">input</span> a,<br>	<span class="hljs-built_in">input</span> b,<br><br>	<span class="hljs-built_in">output</span> reg c<br>);<br>always @(posedge clk_sys <span class="hljs-keyword">or</span> negedge rst_n) begin<br>	<span class="hljs-keyword">if</span>(!rst_n) <br>		c &lt;= <span class="hljs-number">0</span>;<br>	<span class="hljs-keyword">else</span> <br>		c &lt;= a+b;<br><span class="hljs-keyword">end</span><br>endmodule <br></code></pre></td></tr></table></figure>

<p>对应的RTL电路是(使用Quartus编译环境)：</p>
<p><img src="https://milknougat-my.sharepoint.com/personal/milk_milknougat_onmicrosoft_com/_layouts/52/download.aspx?share=ERQOi1mFUMFLn7730cZP7loBgehSjU7KDghGj5Mp6wTMVA"></p>
<p>仔细看上图,发现该电路和Verilog描述的有点区别,Verilog把加法放在时序逻辑里实现,而实际电路却是两个分开的.<br>我们再用Verilog把上面的电路描述一遍：</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs verilog">&gt;<span class="hljs-keyword">module</span> adder(<br>	<span class="hljs-keyword">input</span> clk_sys,<br>	<span class="hljs-keyword">input</span> rst_n,<br><br>	<span class="hljs-keyword">input</span> a,<br>	<span class="hljs-keyword">input</span> b,<br><br>	<span class="hljs-keyword">output</span> <span class="hljs-keyword">reg</span> c<br>);<br><br><span class="hljs-keyword">wire</span> c_w;<br><br><span class="hljs-keyword">assign</span> c_w = a + b;<br><br><span class="hljs-keyword">always</span> @(<span class="hljs-keyword">posedge</span> clk_sys <span class="hljs-keyword">or</span> <span class="hljs-keyword">negedge</span> rst_n) <span class="hljs-keyword">begin</span><br>	<span class="hljs-keyword">if</span>(!rst_n) <br>		c &lt;= <span class="hljs-number">0</span>;<br>	<span class="hljs-keyword">else</span> <br>		c &lt;= c_w;<br><span class="hljs-keyword">end</span><br><span class="hljs-keyword">endmodule</span> <br></code></pre></td></tr></table></figure>
<p>然后再编译综合一次，看一下RTL电路：</p>
<p><img src="https://milknougat-my.sharepoint.com/personal/milk_milknougat_onmicrosoft_com/_layouts/52/download.aspx?share=EbbNe24s0V1Du93bloe0QaoBmNSdAUWJz9nwc727PsIkOA"></p>
<p>和描述的完全一致.</p>
<p>得到的结论是：FPGA内部单元电路只有D触发器是时序电路，其余的都是组合电路（如加法器），不存在“同步时序加法器”的单元电路.</p>
<p>所以记住一点,任何需要运算的地方都放在组合电路里实现,任何需要clk同步时序的地方都只包含一个<strong>D触发器</strong>的延迟操作.</p>
</blockquote>
<h3 id="个人理解"><a href="#个人理解" class="headerlink" title="个人理解:"></a>个人理解:</h3><p>组合逻辑和时序逻辑最主要的区别就是是否有寄存器,时序逻辑需要一个寄存器来进行状态的记录.无需记录状态的逻辑组件也会被编译器直接优化掉的.</p>
<h2 id="D触发器"><a href="#D触发器" class="headerlink" title="D触发器"></a>D触发器</h2><blockquote>
<p>D触发器是一个具有记忆功能的，具有两个稳定状态的信息存储器件，是构成多种时序电路的最基本逻辑单元，也是数字逻辑电路中一种重要的单元电路。</p>
<p>因此，D触发器在数字系统和计算机中有着广泛的应用。触发器具有两个稳定状态，即”0”和”1”，在一定的外界信号作用下，可以从一个稳定状态翻转到另一个稳定状态。</p>
<p>D触发器有集成触发器和门电路组成的触发器。触发方式有电平触发和边沿触发两种，前者在CP(<strong>时钟脉冲</strong>)&#x3D;1时即可触发，后者多在CP的前沿（正跳变0→1）触发。</p>
<p>D触发器的次态取决于触发前D端的状态，即次态&#x3D;D。因此，它具有置0、置1两种功能。</p>
<p>对于边沿D触发器，由于在CP&#x3D;1期间电路具有维持阻塞作用，所以在CP&#x3D;1期间，D端的数据状态变化，不会影响触发器的输出状态。</p>
<p>D触发器应用很广，可用做数字信号的寄存，移位寄存，分频和波形发生器等等。</p>
</blockquote>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div id="footer-link" style="right: calc(50% - 1px);order: 1;border-right: 1px solid #fe2;padding-left: unset;max-width: calc(50% - 4px);"><a href="/2022/06/22/guide-customize-windows-terminal/">← Next Window环境下安装oh-my-posh美化terminal</a></div><div id="footer-link" style="left: 50%;order: 0;border-left: 1px solid #fe2;padding-right: unset;max-width: calc(50% - 5px);"><a href="/2022/06/21/guide-openwrt-expand-disk/">(转载)OpenWRT overlay 空间扩容 Prev →</a></div></div></div></div><div id="bottom-btn"><a id="to-top" onClick="index.scrolltop();" title="to top" style="opacity: 0; display: none;">∧</a></div></article><div class="aside-box"><aside><div id="aside-top"><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Poetryrain</a></h1><div id="description"><p></p></div><!--if page.published === undefined--><section id="total"><a id="total-archives" href="/archives"><span class="total-title">Archives Total:</span><span class="total-number">28</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">10</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">0</span></div></section></div><div id="aside-block"><div id="toc-div"><h1>INDEX</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#assign-%E7%94%A8%E4%BA%8E%E6%8F%8F%E8%BF%B0%E7%BB%84%E5%90%88%E9%80%BB%E8%BE%91"><span class="toc-number">1.</span> <span class="toc-text">assign 用于描述组合逻辑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#always-%E6%95%8F%E6%84%9F%E4%BA%8B%E4%BB%B6%E5%88%97%E8%A1%A8-%E7%94%A8%E4%BA%8E%E6%8F%8F%E8%BF%B0%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91"><span class="toc-number">2.</span> <span class="toc-text">always@(敏感事件列表) 用于描述时序逻辑</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E7%9A%84%E5%AE%9E%E9%AA%8C%E5%B8%AE%E5%8A%A9%E8%BF%9B%E8%A1%8C%E7%90%86%E8%A7%A3"><span class="toc-number">2.1.</span> <span class="toc-text">引用一篇文章的实验帮助进行理解:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Verilog%E7%BC%96%E7%A8%8B%EF%BC%8C%E8%AF%B7%E6%8A%8A%E6%97%B6%E5%BA%8F%E9%80%BB%E8%BE%91%E5%92%8C%E7%BB%84%E5%90%88%E9%80%BB%E8%BE%91%E5%BD%BB%E5%BA%95%E5%88%86%E5%BC%80%EF%BC%81"><span class="toc-number">2.2.</span> <span class="toc-text">Verilog编程，请把时序逻辑和组合逻辑彻底分开！</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3"><span class="toc-number">2.3.</span> <span class="toc-text">个人理解:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#D%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">3.</span> <span class="toc-text">D触发器</span></a></li></ol></div></div></div><footer><nobr><span class="text-title">©</span><span class="text-content">1970 to 2020</span></nobr><br><nobr><span class="text-title">ICP</span><span class="text-content">——备案号——</span></nobr><br><text>published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></text><text> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight</a></text><wbr><text>by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></text></footer></aside></div></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script>const reset=_=>{}</script><script src="//unpkg.com/@highlightjs/cdn-assets@11.4.0/highlight.min.js"></script><script src="/js/arknights.js"></script><script>document.addEventListener("load",reset())</script></body></html>